(window.webpackJsonp=window.webpackJsonp||[]).push([[218],{532:function(s,a,t){"use strict";t.r(a);var e=t(8),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("create date: 2023-10-12 11:54"),a("br"),s._v("\nStatus: #idea"),a("br"),s._v("\nTags: mysql")]),s._v(" "),a("hr"),s._v(" "),a("h1",{attrs:{id:"远程连接mysql数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#远程连接mysql数据库"}},[s._v("#")]),s._v(" 远程连接mysql数据库")]),s._v(" "),a("h3",{attrs:{id:"mysql8-0设置远程访问权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql8-0设置远程访问权限"}},[s._v("#")]),s._v(" "),a("strong",[s._v("MySQL8.0设置远程访问权限")])]),s._v(" "),a("h3",{attrs:{id:"_1-登录mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-登录mysql"}},[s._v("#")]),s._v(" 1.登录MySQL")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql -u root -p\n输入您的密码\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_2-选择-mysql-数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-选择-mysql-数据库"}},[s._v("#")]),s._v(" 2.选择 mysql 数据库")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("use mysql;\n因为 mysql 数据库中存储了用户信息的 user 表。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_3-在-mysql-数据库的-user-表中查看当前-root-用户的相关信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-在-mysql-数据库的-user-表中查看当前-root-用户的相关信息"}},[s._v("#")]),s._v(" 3.在 mysql 数据库的 user 表中查看当前 root 用户的相关信息")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select host, user, authentication_string, plugin from user;\n执行完上面的命令后会显示一个表格\n查看表格中 root 用户的 host，默认应该显示的 localhost，只支持本地访问，不允许远程访问。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"_4-授权-root-用户的所有权限并设置远程访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-授权-root-用户的所有权限并设置远程访问"}},[s._v("#")]),s._v(" 4.授权 root 用户的所有权限并设置远程访问")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("GRANT ALL ON *.* TO 'root'@'%';\nGRANT ALL ON 表示所有权限，% 表示通配所有 host，可以访问远程。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("如果提示：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic4.zhimg.com/v2-998a9c24784a65c103db51b0ef2d13ab_b.png",alt:""}})]),s._v(" "),a("p",[s._v("update user set host='%' where user='root';")]),s._v(" "),a("p",[s._v("再执行两次")]),s._v(" "),a("p",[s._v("GRANT ALL ON "),a("em",[s._v(".")]),s._v(" TO 'root'@'%';")]),s._v(" "),a("h3",{attrs:{id:"_5-刷新权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-刷新权限"}},[s._v("#")]),s._v(" 5.刷新权限")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("所有操作后，应执行\nflush privileges;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_6-查看-root-用户的-host"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-查看-root-用户的-host"}},[s._v("#")]),s._v(" 6.查看 root 用户的 host")]),s._v(" "),a("p",[s._v("再次执行步骤 2，你会发现 root 用户的 host 已经变成 %，说明我们的修改已经成功，可以远程访问了。")]),s._v(" "),a("h3",{attrs:{id:"_7-访问数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-访问数据库"}},[s._v("#")]),s._v(" 7.访问数据库")]),s._v(" "),a("p",[s._v("远程访问数据库的可视化工具比较多如：Navicat、SQLyog、MySQL workbench 等，我这里使用 Navicat"),a("br"),s._v("\n输入访问的 host 和密码，报 2059 错误，这是因为 MySql8.0 版本 和 5.0 的加密规则不一样，而现在的可视化工具只支持旧的加密方式。"),a("br"),s._v("\n此问题有两种方法，一种是更新 Navicat 驱动来解决此问题，另一种是将 MySQL 用户登录的加密规则修改为 mysql_native_password，第一种方法我试过了没有起作用，我这里采用第二种方法。")]),s._v(" "),a("h3",{attrs:{id:"_8-修改加密规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-修改加密规则"}},[s._v("#")]),s._v(" 8.修改加密规则")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ALTER USER 'root'@'localhost' IDENTIFIED BY 'password' PASSWORD EXPIRE NEVER;\npassword 为你当前密码。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_9-更新-root-用户密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-更新-root-用户密码"}},[s._v("#")]),s._v(" 9.更新 root 用户密码")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'password';\npassword 为你新设置的密码。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_10-刷新权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-刷新权限"}},[s._v("#")]),s._v(" 10.刷新权限")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("FLUSH PRIVILEGES;\nOK，设置完成，再次使用 Navicat 连接数据库，oh yeah~\n完美解决！\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h1",{attrs:{id:"references"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[s._v("#")]),s._v(" references")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/587097435",target:"_blank",rel:"noopener noreferrer"}},[s._v("MySQL8.0设置远程访问权限 - 知乎 (zhihu.com)"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);